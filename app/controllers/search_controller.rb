class SearchController < ApplicationController
        def search
                if params[:search]
                        @definition = Wordnik.word.get_definitions(params[:search],:part_of_speech => 'noun,adjective,verb,adverb,interjection,pronoun,preposition,noun-plural,past-participle,proper-noun,verb-intransitive,verb-transitive')
                        @definitions = @definition.uniq {|e| e['partOfSpeech'] } 
                        @word = params[:search]
                        @pronounciation_url = "http://api.wordnik.com:80/v4/word.json/#{params[:search]}/pronunciations?useCanonical=false&api_key=#{Wordnik.configuration.api_key}"
                        pro_buffer = RestClient.get @pronounciation_url
                        @pro_results = JSON.parse(pro_buffer)
                        @related_url = "http://api.wordnik.com:80/v4/word.json/#{params[:search]}/relatedWords?useCanonical=false&limitPerRelationshipType=10&api_key=#{Wordnik.configuration.api_key}"
                        rel_buffer = RestClient.get @related_url
                        @rel_results = JSON.parse(rel_buffer)
                        @top_url = "http://api.wordnik.com:80/v4/word.json/#{params[:search]}/topExample?useCanonical=false&api_key=#{Wordnik.configuration.api_key}"
                        top_buffer = RestClient.get @top_url
                        @top_results = JSON.parse(top_buffer)
                        @example_url = "http://api.wordnik.com:80/v4/word.json/#{params[:search]}/examples?includeDuplicates=false&useCanonical=false&skip=0&api_key=#{Wordnik.configuration.api_key}"
                        example_buffer = RestClient.get @example_url
                        @example_results = JSON.parse(example_buffer)
                        @audio_url = "http://api.wordnik.com:80/v4/word.json/#{params[:search]}/audio?includeDuplicates=false&useCanonical=false&skip=0&api_key=#{Wordnik.configuration.api_key}"
                        audio_buffer = RestClient.get @audio_url
                        @audio_results = JSON.parse(audio_buffer)
                        @picture_url = "https://openclipart.org/search/json/?query=#{params[:search]}&amount=20"
                        pic_buffer = RestClient.get @picture_url
                        @pic_results = JSON.parse(pic_buffer)
                        @image = @pic_results['payload'][0]['svg']['png_thumb']
                        @image2 = @pic_results['payload'][1]['svg']['png_thumb']
                        @image3 = @pic_results['payload'][2]['svg']['png_thumb']
                        @image4 = @pic_results['payload'][3]['svg']['png_thumb']
                        @image5 = @pic_results['payload'][4]['svg']['png_thumb']
                        @xml = Nokogiri::XML(open("http://www.dictionaryapi.com/api/v1/references/sd2/xml/#{params[:search]}?key=42c43bc1-6d57-4fba-8453-2c6886a96a42"))
                        @elementary_xml = Nokogiri::XML(open("http://www.dictionaryapi.com/api/v1/references/learners/xml/#{params[:search]}?key=aa6dcb88-68ca-41d8-a980-fa0c55ac4718"))
                else
                end

        end

        def convert_pdf_wicked
          @params = {"utf8"=>"✓", "authenticity_token"=>"zN0QTuzPybd1myEX0D8CPBqHut9+cTyT3G0hjRWVYRzBq108am8utxT70o80932uTEZ9VlNbssvim1dqux/uAQ==", "word"=>"test", "definitions_count"=>"3", "part_of_speech_0_check"=>"1", "part_of_speech_0"=>"{\"textProns\"=>[], \"sourceDictionary\"=>\"ahd-legacy\", \"exampleUses\"=>[], \"relatedWords\"=>[], \"labels\"=>[], \"citations\"=>[], \"word\"=>\"test\", \"partOfSpeech\"=>\"noun\", \"attributionText\"=>\"from The American Heritage® Dictionary of the English Language, 4th Edition\", \"sequence\"=>\"0\", \"text\"=>\"A procedure for critical evaluation; a means of determining the presence, quality, or truth of something; a trial:  a test of one's eyesight; subjecting a hypothesis to a test; a test of an athlete's endurance. \", \"score\"=>0.0}", "part_of_speech_1_check"=>"1", "part_of_speech_1"=>"{\"textProns\"=>[], \"sourceDictionary\"=>\"ahd-legacy\", \"exampleUses\"=>[], \"relatedWords\"=>[], \"labels\"=>[], \"citations\"=>[], \"word\"=>\"test\", \"partOfSpeech\"=>\"verb-transitive\", \"attributionText\"=>\"from The American Heritage® Dictionary of the English Language, 4th Edition\", \"sequence\"=>\"7\", \"text\"=>\"To subject to a test; try:  tested the pen by scribbling on scrap paper; testing job applicants. \", \"score\"=>0.0}", "part_of_speech_2"=>"{\"textProns\"=>[], \"sourceDictionary\"=>\"ahd-legacy\", \"exampleUses\"=>[], \"relatedWords\"=>[], \"labels\"=>[], \"citations\"=>[], \"word\"=>\"test\", \"partOfSpeech\"=>\"verb-intransitive\", \"attributionText\"=>\"from The American Heritage® Dictionary of the English Language, 4th Edition\", \"sequence\"=>\"10\", \"text\"=>\"To undergo a test.\", \"score\"=>0.0}", "pronounciations_count"=>"2", "raw_type_0"=>"{\"seq\"=>0, \"rawType\"=>\"ahd-legacy\", \"raw\"=>\"(tĕst)\"}", "raw_type_0_check"=>"1", "raw_type_1"=>"{\"seq\"=>0, \"rawType\"=>\"arpabet\", \"raw\"=>\"T EH1 S T\"}", "raw_type_1_check"=>"1", "related_words_count"=>"10", "relationship_type_0"=>"{\"relationshipType\"=>\"equivalent\", \"words\"=>[\"testa\"]}", "relationship_type_0_check"=>"1", "relationship_type_1"=>"{\"relationshipType\"=>\"verb-form\", \"words\"=>[\"tested\", \"testes\", \"testing\", \"tests\"]}", "relationship_type_1_check"=>"1", "relationship_type_2"=>"{\"relationshipType\"=>\"hypernym\", \"words\"=>[\"submit\", \"take\", \"attempt\", \"endeavor\", \"effort\", \"endeavour\", \"try\", \"be\", \"cover\", \"covering\"]}", "relationship_type_2_check"=>"1", "relationship_type_3"=>"{\"relationshipType\"=>\"cross-reference\", \"words\"=>[\"teichmann' s test\", \"acetylation test\", \"böttger's sugar test\", \"ehrlich's test\", \"warren' s sulphur-chlorid test\", \"blavier' s test\", \"loop test\", \"catoptric test\", \"gmelin' s test\", \"test case\"]}", "relationship_type_3_check"=>"1", "relationship_type_4"=>"{\"relationshipType\"=>\"etymologically-related-term\", \"words\"=>[\"attest\", \"protest\", \"contest\", \"detest\"]}", "relationship_type_4_check"=>"1", "relationship_type_5"=>"{\"relationshipType\"=>\"variant\", \"words\"=>[\"examination\", \"exam\"]}", "relationship_type_5_check"=>"1", "relationship_type_6"=>"{\"relationshipType\"=>\"synonym\", \"words\"=>[\"criterion\", \"standard\", \"experiment\", \"proof\", \"experience\", \"trial\", \"touchstone\", \"judgment\", \"distinction\", \"discrimination\"]}", "relationship_type_7"=>"{\"relationshipType\"=>\"rhyme\", \"words\"=>[\"Best\", \"Blessed\", \"Brest\", \"Celeste\", \"Este\", \"Midwest\", \"Pest\", \"West\", \"abreast\", \"acquiesced\"]}", "relationship_type_8"=>"{\"relationshipType\"=>\"unknown\", \"words\"=>[\"Education\", \"Voices\"]}", "relationship_type_9"=>"{\"relationshipType\"=>\"same-context\", \"words\"=>[\"data\", \"analysis\", \"control\", \"requirement\", \"train\", \"standard\", \"level\", \"problem\"]}", "top_example"=>"Create a folder named test that contains two files one named. _test.txt and test. txt on OSX and copy to an SMB share on W2k3.", "examples_count"=>"5", "example_0"=>"{\"provider\"=>{\"name\"=>\"spinner\", \"id\"=>712}, \"year\"=>2009, \"rating\"=>8572.236, \"url\"=>\"http://api.wordnik.com/v4/mid/0bccdd589e8d6ac27f8cf09b09c0f49a26963cd624a92460ef71d1fc47cf6fbc\", \"word\"=>\"test\", \"text\"=>\"Posted Yesterday, 11: 26 pm possible debugging - var test = \\\"imageurl\\\" + TLSTimeInSeconds; alert ( \\\"Looking for:\\\" +test);\", \"documentId\"=>10274887, \"exampleId\"=>80719959}", "example_0_check"=>"1", "example_1"=>"{\"provider\"=>{\"name\"=>\"spinner\", \"id\"=>712}, \"year\"=>2009, \"rating\"=>8572.236, \"url\"=>\"http://api.wordnik.com/v4/mid/abf4671d096f265ae3924fbb4803132c0650f323a695d04341d3c75ddf0d3eca\", \"word\"=>\"test\", \"text\"=>\"Create a folder named test that contains two files one named. _test.txt and test. txt on OSX and copy to an SMB share on W2k3.\", \"title\"=>\"MacWindows\", \"documentId\"=>12503387, \"exampleId\"=>147942129}", "example_1_check"=>"1", "example_2"=>"{\"provider\"=>{\"name\"=>\"spinner\", \"id\"=>712}, \"year\"=>2010, \"rating\"=>5307.0, \"url\"=>\"http://api.wordnik.com/v4/mid/67477b7238297945420322f73f3ecce604eaf372bb94ef15babdd0b80fb98a6f\", \"word\"=>\"test\", \"text\"=>\"Class - goodmorning mr. jonas Joe - * holds up a stack of papers* were gonna start today with a science test Class - * all groan* Joe - oh stop it, its not that hard * hands out the tests* remember, if u have any questions, raise ur hands. you have 45 minutes to do this, so enjoy * sits at his desk/looks at nick* Nick - * looks up at him/mouths* evil Joe - * mouths back* I love you Nick - * blushes/starts his test* ~Right Before Lunch~ Nick -\", \"title\"=>\"WN.com - Financial News\", \"documentId\"=>27810938, \"exampleId\"=>674451165}", "example_3"=>"{\"provider\"=>{\"name\"=>\"spinner\", \"id\"=>712}, \"year\"=>2010, \"rating\"=>5307.0, \"url\"=>\"http://api.wordnik.com/v4/mid/6ea0af33c9e06afaf91de0352c36a43317501d796d9bfe4791b4cc3e460bac4e\", \"word\"=>\"test\", \"text\"=>\"[test] writeable = yes force user = test force group = test path =/test write list = test @test\", \"title\"=>\"LinuxQuestions.org\", \"documentId\"=>26578055, \"exampleId\"=>562445697}", "example_4"=>"{\"provider\"=>{\"name\"=>\"spinner\", \"id\"=>712}, \"year\"=>2009, \"rating\"=>5235.635, \"url\"=>\"http://api.wordnik.com/v4/mid/680a21d51b02cfd283284ae0003974877ced409a48f112ef131a588fa46841ea\", \"word\"=>\"test\", \"text\"=>\"RUN explorer c: \\\\ send {t} {space} this will select the test file, but not always, as there could be more files starting with a t and no i dont want to put a highly unusual character infront of test. txt, like ~test. txt to make it stand out, this is really n gging me other yucky workaround: run cmd,, winwaitactive C: \\\\Windows\\\\system32\\\\cmd. exe send explorer/select, % profile%\\\\my jumplists\\\\kk\\\\edit kk. lnk {enter} sleep 200 winclose C: \\\\Windows\\\\system32\\\\cmd. exe\", \"title\"=>\"AutoHotkey Community\", \"documentId\"=>20415920, \"exampleId\"=>390998267}", "pictures_count"=>"20", "picture_0"=>"{\"title\"=>\"spectrum steps 10\", \"uploader\"=>\"Lazur URH\", \"comments\"=>\"\", \"total_favorites\"=>1, \"description\"=>\"\\\"Spectrum\\\" \\\"stepped\\\" into 1-36-37 steps. In reality only one gradient fill is used for all, so theoretically only the center horizontal axis of each rectangle is filled with the accurate colour -if ever. Also each rectangle has the same area, and the steps are adjusted for a repeating gradient (starting step is the same colour as the end step). With slight overlapping to avoid rendering \\\"gap\\\" between the tiles. \", \"tags\"=>\"2015, bright, color, colour, colour theory, gradient, hue, Lazur, mathematics, overlapping beauties, primer, remix+228845, remix+229145, remix+232927, remix+233022, rgb, saturated, spectrum, steps, test images, URH\", \"downloaded_by\"=>36, \"detail_link\"=>\"https://openclipart.org/detail/233023/spectrum%20steps%2010\", \"id\"=>233023, \"created\"=>\"2015-11-29 04:54:24\", \"svg\"=>{\"url\"=>\"https://openclipart.org/download/233023/stepped20.svg\", \"png_thumb\"=>\"https://openclipart.org/image/250px/svg_to_png/233023/stepped20.png\", \"png_full_lossy\"=>\"https://openclipart.org/image/800px/svg_to_png/233023/stepped20.png\", \"png_2400px\"=>\"https://openclipart.org/image/2400px/svg_to_png/233023/stepped20.png\"}, \"dimensions\"=>{\"png_thumb\"=>{\"width\"=>67, \"height\"=>250}, \"png_full_lossy\"=>{\"width\"=>216, \"height\"=>800}}}", "picture_1"=>"{\"title\"=>\"spectrum steps 9\", \"uploader\"=>\"Lazur URH\", \"comments\"=>\"\", \"total_favorites\"=>1, \"description\"=>\"\\\"Spectrum\\\" \\\"stepped\\\" into 1-36-37 steps. In reality only one gradient fill is used for all, so theoretically only the center horizontal axis of each rectangle is filled with the accurate colour -if ever. Also each rectangle has the same area, and the steps are adjusted for a repeating gradient (starting step is the same colour as the end step).\", \"tags\"=>\"2015, bright, color, colour, colour theory, gradient, hue, Lazur, mathematics, overlapping beauties, primer, remix+228845, remix+229145, remix+232927, rgb, saturated, spectrum, steps, test images, URH\", \"downloaded_by\"=>55, \"detail_link\"=>\"https://openclipart.org/detail/233022/spectrum%20steps%209\", \"id\"=>233022, \"created\"=>\"2015-11-29 02:00:41\", \"svg\"=>{\"url\"=>\"https://openclipart.org/download/233022/stepped18.svg\", \"png_thumb\"=>\"https://openclipart.org/image/250px/svg_to_png/233022/stepped18.png\", \"png_full_lossy\"=>\"https://openclipart.org/image/800px/svg_to_png/233022/stepped18.png\", \"png_2400px\"=>\"https://openclipart.org/image/2400px/svg_to_png/233022/stepped18.png\"}, \"dimensions\"=>{\"png_thumb\"=>{\"width\"=>67, \"height\"=>250}, \"png_full_lossy\"=>{\"width\"=>216, \"height\"=>800}}}", "picture_1_check"=>"1", "picture_2"=>"{\"title\"=>\"spectrum steps 8\", \"uploader\"=>\"Lazur URH\", \"comments\"=>\"\", \"total_favorites\"=>1, \"description\"=>\"\\\"Spectrum\\\" \\\"stepped\\\" into 1-36-37 steps. In reality only one gradient fill is used for all, so theoretically only the center horizontal axis of each rectangle is filled with the accurate colour -if ever. Also each rectangle has the same area. With slight overlapping to avoid rendering gaps with anti-aliasing. \", \"tags\"=>\"2015, bright, color, colour, colour theory, gradient, hue, Lazur, mathematics, overlapping beauties, primer, remix+228845, remix+229145, remix+233003, remix+232777, rgb, saturated, spectrum, steps, test images, URH\", \"downloaded_by\"=>42, \"detail_link\"=>\"https://openclipart.org/detail/233021/spectrum%20steps%208\", \"id\"=>233021, \"created\"=>\"2015-11-29 01:25:57\", \"svg\"=>{\"url\"=>\"https://openclipart.org/download/233021/stepped17.svg\", \"png_thumb\"=>\"https://openclipart.org/image/250px/svg_to_png/233021/stepped17.png\", \"png_full_lossy\"=>\"https://openclipart.org/image/800px/svg_to_png/233021/stepped17.png\", \"png_2400px\"=>\"https://openclipart.org/image/2400px/svg_to_png/233021/stepped17.png\"}, \"dimensions\"=>{\"png_thumb\"=>{\"width\"=>67, \"height\"=>250}, \"png_full_lossy\"=>{\"width\"=>216, \"height\"=>800}}}", "picture_3"=>"{\"title\"=>\"spectrum steps 7\", \"uploader\"=>\"Lazur URH\", \"comments\"=>\"\", \"total_favorites\"=>0, \"description\"=>\"\\\"Spectrum\\\" \\\"stepped\\\" into 1-36-37 steps. In reality only one gradient fill is used for all, so theoretically only the center horizontal axis of each rectangle is filled with the accurate colour -if ever. Also each rectangle has the same area. \", \"tags\"=>\"2015, bright, color, colour, colour theory, gradient, hue, Lazur, mathematics, overlapping beauties, primer, remix+228845, remix+229145, remix+232777, rgb, saturated, spectrum, steps, test images, URH\", \"downloaded_by\"=>49, \"detail_link\"=>\"https://openclipart.org/detail/233003/spectrum%20steps%207\", \"id\"=>233003, \"created\"=>\"2015-11-28 11:17:33\", \"svg\"=>{\"url\"=>\"https://openclipart.org/download/233003/stepped16.svg\", \"png_thumb\"=>\"https://openclipart.org/image/250px/svg_to_png/233003/stepped16.png\", \"png_full_lossy\"=>\"https://openclipart.org/image/800px/svg_to_png/233003/stepped16.png\", \"png_2400px\"=>\"https://openclipart.org/image/2400px/svg_to_png/233003/stepped16.png\"}, \"dimensions\"=>{\"png_thumb\"=>{\"width\"=>67, \"height\"=>250}, \"png_full_lossy\"=>{\"width\"=>216, \"height\"=>800}}}", "picture_4"=>"{\"title\"=>\"spectrum steps 6\", \"uploader\"=>\"Lazur URH\", \"comments\"=>\"\", \"total_favorites\"=>0, \"description\"=>\"Gapless rendering at any zoom level, this grid contains the linear rgb field's hue range broken down to 1 to 36 steps. Uses only one gradient to achieve this.\", \"tags\"=>\"2015, bright, color, colour, colour theory, gradient, hue, Lazur, mathematics, overlapping beauties, primer, remix+202188, remix+228845, remix+232718, remix+232777, remix+232927, remix+232953, rgb, saturated, spectrum, steps, test images, URH\", \"downloaded_by\"=>68, \"detail_link\"=>\"https://openclipart.org/detail/232981/spectrum%20steps%206\", \"id\"=>232981, \"created\"=>\"2015-11-26 23:07:25\", \"svg\"=>{\"url\"=>\"https://openclipart.org/download/232981/stepped15.svg\", \"png_thumb\"=>\"https://openclipart.org/image/250px/svg_to_png/232981/stepped15.png\", \"png_full_lossy\"=>\"https://openclipart.org/image/800px/svg_to_png/232981/stepped15.png\", \"png_2400px\"=>\"https://openclipart.org/image/2400px/svg_to_png/232981/stepped15.png\"}, \"dimensions\"=>{\"png_thumb\"=>{\"width\"=>135, \"height\"=>250}, \"png_full_lossy\"=>{\"width\"=>432, \"height\"=>800}}}", "picture_5"=>"{\"title\"=>\"spectrum steps 5\", \"uploader\"=>\"Lazur URH\", \"comments\"=>\"\", \"total_favorites\"=>0, \"description\"=>\"\\\"Spectrum\\\" \\\"stepped\\\" into 1-36-37 steps. In reality only one gradient fill is used for all, so theoretically only the center horizontal axis of each rectangle is filled with the accurate colour -if ever. As, you cannot break down 256 to like 36 even steps. So there should be some rounding at rendering, still good for the original purpose I guess. This variant doesn't produce rendering gaps with anti-aliasing. \", \"tags\"=>\"2015, bright, chrominance, color, colour, colour theory, gradient, hue, Lazur, linear, mathematics, overlapping beauties, primer, remix+202188, remix+228845, remix+228846, remix+232718, rgb, saturated, spectrum, steps, test images, URH\", \"downloaded_by\"=>93, \"detail_link\"=>\"https://openclipart.org/detail/232953/spectrum%20steps%205\", \"id\"=>232953, \"created\"=>\"2015-11-25 23:09:51\", \"svg\"=>{\"url\"=>\"https://openclipart.org/download/232953/stepped14.svg\", \"png_thumb\"=>\"https://openclipart.org/image/250px/svg_to_png/232953/stepped14.png\", \"png_full_lossy\"=>\"https://openclipart.org/image/800px/svg_to_png/232953/stepped14.png\", \"png_2400px\"=>\"https://openclipart.org/image/2400px/svg_to_png/232953/stepped14.png\"}, \"dimensions\"=>{\"png_thumb\"=>{\"width\"=>135, \"height\"=>250}, \"png_full_lossy\"=>{\"width\"=>432, \"height\"=>800}}}", "picture_6"=>"{\"title\"=>\"spectrum steps 4\", \"uploader\"=>\"Lazur URH\", \"comments\"=>\"\", \"total_favorites\"=>0, \"description\"=>\"With a bit more convenient arrangement for displaying the spectrum colours. Still with rendering gaps. \", \"tags\"=>\"2015, bright, color, colour, colour theory, gradient, hue, Lazur, mathematics, primer, remix+202188, remix+228845, remix+232718, remix+232777, rgb, saturated, spectrum, steps, test images, URH\", \"downloaded_by\"=>97, \"detail_link\"=>\"https://openclipart.org/detail/232927/spectrum%20steps%204\", \"id\"=>232927, \"created\"=>\"2015-11-24 23:10:16\", \"svg\"=>{\"url\"=>\"https://openclipart.org/download/232927/stepped10.svg\", \"png_thumb\"=>\"https://openclipart.org/image/250px/svg_to_png/232927/stepped10.png\", \"png_full_lossy\"=>\"https://openclipart.org/image/800px/svg_to_png/232927/stepped10.png\", \"png_2400px\"=>\"https://openclipart.org/image/2400px/svg_to_png/232927/stepped10.png\"}, \"dimensions\"=>{\"png_thumb\"=>{\"width\"=>250, \"height\"=>463}, \"png_full_lossy\"=>{\"width\"=>800, \"height\"=>1480}}}", "picture_7"=>"{\"title\"=>\"stepped gradient\", \"uploader\"=>\"Lazur URH\", \"comments\"=>\"\", \"total_favorites\"=>1, \"description\"=>\"Changed the gradient fill from the spectrum just for chilling. \", \"tags\"=>\"remix+232777, gradient steps, test, Lazur, URH, 2015, \", \"downloaded_by\"=>60, \"detail_link\"=>\"https://openclipart.org/detail/232778/stepped%20gradient\", \"id\"=>232778, \"created\"=>\"2015-11-22 23:03:28\", \"svg\"=>{\"url\"=>\"https://openclipart.org/download/232778/stepped4.svg\", \"png_thumb\"=>\"https://openclipart.org/image/250px/svg_to_png/232778/stepped4.png\", \"png_full_lossy\"=>\"https://openclipart.org/image/800px/svg_to_png/232778/stepped4.png\", \"png_2400px\"=>\"https://openclipart.org/image/2400px/svg_to_png/232778/stepped4.png\"}, \"dimensions\"=>{\"png_thumb\"=>{\"width\"=>135, \"height\"=>250}, \"png_full_lossy\"=>{\"width\"=>432, \"height\"=>800}}}", "picture_8"=>"{\"title\"=>\"spectrum steps 3\", \"uploader\"=>\"Lazur URH\", \"comments\"=>\"\", \"total_favorites\"=>1, \"description\"=>\"\\\"Spectrum\\\" \\\"stepped\\\" into 1-36-37 steps. In reality only one gradient fill is used for all, so theoretically only the center horizontal axis of each rectangle is filled with the accurate colour -if ever. As, you cannot break down 256 to like 36 even steps. So there should be some rounding at rendering, still good for the original purpose I guess. \", \"tags\"=>\"2015, bright, color, colour, colour theory, gradient, hue, Lazur, mathematics, primer, remix+202188, remix+228845, remix+232718, rgb, saturated, spectrum, steps, test images, URH\", \"downloaded_by\"=>73, \"detail_link\"=>\"https://openclipart.org/detail/232777/spectrum%20steps%203\", \"id\"=>232777, \"created\"=>\"2015-11-22 22:40:04\", \"svg\"=>{\"url\"=>\"https://openclipart.org/download/232777/stepped3.svg\", \"png_thumb\"=>\"https://openclipart.org/image/250px/svg_to_png/232777/stepped3.png\", \"png_full_lossy\"=>\"https://openclipart.org/image/800px/svg_to_png/232777/stepped3.png\", \"png_2400px\"=>\"https://openclipart.org/image/2400px/svg_to_png/232777/stepped3.png\"}, \"dimensions\"=>{\"png_thumb\"=>{\"width\"=>135, \"height\"=>250}, \"png_full_lossy\"=>{\"width\"=>432, \"height\"=>800}}}", "picture_9"=>"{\"title\"=>\"cairo test -fail-\", \"uploader\"=>\"Lazur URH\", \"comments\"=>\"\", \"total_favorites\"=>0, \"description\"=>\"In the process of adding colours to the grid as large linear gradients.  Triggers rendering glitches. Test image. \", \"tags\"=>\"2015, bug, cairo, colour theory, gradient, Lazur, remix+228845, test, test images, URH\", \"downloaded_by\"=>88, \"detail_link\"=>\"https://openclipart.org/detail/232718/cairo%20test%20-fail-\", \"id\"=>232718, \"created\"=>\"2015-11-21 21:36:49\", \"svg\"=>{\"url\"=>\"https://openclipart.org/download/232718/spectrum-bug.svg\", \"png_thumb\"=>\"https://openclipart.org/image/250px/svg_to_png/232718/spectrum-bug.png\", \"png_full_lossy\"=>\"https://openclipart.org/image/800px/svg_to_png/232718/spectrum-bug.png\", \"png_2400px\"=>\"https://openclipart.org/image/2400px/svg_to_png/232718/spectrum-bug.png\"}, \"dimensions\"=>{\"png_thumb\"=>{\"width\"=>135, \"height\"=>250}, \"png_full_lossy\"=>{\"width\"=>432, \"height\"=>800}}}", "picture_10"=>"{\"title\"=>\"halftone squares\", \"uploader\"=>\"Lazur URH\", \"comments\"=>\"\", \"total_favorites\"=>0, \"description\"=>\"Different sized squares to make an 50% fill. \", \"tags\"=>\"2015, alias, anti-aliasing, black, colour theory, gray, grayscale, grey, halftone, Lazur, pattern, perception, rendering, sample, square, test, test images, URH, white\", \"downloaded_by\"=>84, \"detail_link\"=>\"https://openclipart.org/detail/232203/halftone%20squares\", \"id\"=>232203, \"created\"=>\"2015-11-13 17:44:38\", \"svg\"=>{\"url\"=>\"https://openclipart.org/download/232203/halftone-squares.svg\", \"png_thumb\"=>\"https://openclipart.org/image/250px/svg_to_png/232203/halftone-squares.png\", \"png_full_lossy\"=>\"https://openclipart.org/image/800px/svg_to_png/232203/halftone-squares.png\", \"png_2400px\"=>\"https://openclipart.org/image/2400px/svg_to_png/232203/halftone-squares.png\"}, \"dimensions\"=>{\"png_thumb\"=>{\"width\"=>23, \"height\"=>250}, \"png_full_lossy\"=>{\"width\"=>73, \"height\"=>800}}}", "picture_11"=>"{\"title\"=>\"Index Size v-s Cardinality\", \"uploader\"=>\"sourabhghurye\", \"comments\"=>\"\", \"total_favorites\"=>0, \"description\"=>\"test chart\", \"tags\"=>\"test\", \"downloaded_by\"=>100, \"detail_link\"=>\"https://openclipart.org/detail/231748/Index%20Size%20v-s%20Cardinality\", \"id\"=>231748, \"created\"=>\"2015-11-06 05:52:50\", \"svg\"=>{\"url\"=>\"https://openclipart.org/download/231748/1446789170.svg\", \"png_thumb\"=>\"https://openclipart.org/image/250px/svg_to_png/231748/1446789170.png\", \"png_full_lossy\"=>\"https://openclipart.org/image/800px/svg_to_png/231748/1446789170.png\", \"png_2400px\"=>\"https://openclipart.org/image/2400px/svg_to_png/231748/1446789170.png\"}, \"dimensions\"=>{\"png_thumb\"=>{\"width\"=>250, \"height\"=>132}, \"png_full_lossy\"=>{\"width\"=>800, \"height\"=>420}}}", "picture_12"=>"{\"title\"=>\"simple uml class diagram\", \"uploader\"=>\"dftvlnk\", \"comments\"=>\"\", \"total_favorites\"=>0, \"description\"=>\"test diagram\", \"tags\"=>\"chart, diagram\", \"downloaded_by\"=>115, \"detail_link\"=>\"https://openclipart.org/detail/230858/simple%20uml%20class%20diagram\", \"id\"=>230858, \"created\"=>\"2015-10-24 18:34:16\", \"svg\"=>{\"url\"=>\"https://openclipart.org/download/230858/1445711656.svg\", \"png_thumb\"=>\"https://openclipart.org/image/250px/svg_to_png/230858/1445711656.png\", \"png_full_lossy\"=>\"https://openclipart.org/image/800px/svg_to_png/230858/1445711656.png\", \"png_2400px\"=>\"https://openclipart.org/image/2400px/svg_to_png/230858/1445711656.png\"}, \"dimensions\"=>{\"png_thumb\"=>{\"width\"=>241, \"height\"=>98}, \"png_full_lossy\"=>{\"width\"=>769, \"height\"=>314}}}", "picture_13"=>"{\"title\"=>\"conic spectrum 3\", \"uploader\"=>\"Lazur URH\", \"comments\"=>\"\", \"total_favorites\"=>0, \"description\"=>\"Now the \\\"background\\\" overlaps the gradient so the edge won't look aliased in browsers. For that matter only an edge at 45° would produce a rendering issue, still it's the finest form of this concept at the moment I know of for displaying in browsers. \", \"tags\"=>\"2015, cairo, challenges, color, colours, colour theory, conic gradient, conic spectrum, design sources, Lazur, linear gradient, overlapping beauties, remix+189007, remix+191874, remix+193151, remix+229776, remix+229777, remix+229848, spectrum, test, test images, URH\", \"downloaded_by\"=>113, \"detail_link\"=>\"https://openclipart.org/detail/230797/conic%20spectrum%203\", \"id\"=>230797, \"created\"=>\"2015-10-23 18:48:26\", \"svg\"=>{\"url\"=>\"https://openclipart.org/download/230797/cgrd11.svg\", \"png_thumb\"=>\"https://openclipart.org/image/250px/svg_to_png/230797/cgrd11.png\", \"png_full_lossy\"=>\"https://openclipart.org/image/800px/svg_to_png/230797/cgrd11.png\", \"png_2400px\"=>\"https://openclipart.org/image/2400px/svg_to_png/230797/cgrd11.png\"}, \"dimensions\"=>{\"png_thumb\"=>{\"width\"=>250, \"height\"=>250}, \"png_full_lossy\"=>{\"width\"=>800, \"height\"=>800}}}", "picture_14"=>"{\"title\"=>\"360 conic grid 2\", \"uploader\"=>\"Lazur URH\", \"comments\"=>\"\", \"total_favorites\"=>0, \"description\"=>\"A polar grid based on 360 and its submultiples, with overlapping filled areas. With a different alignment. \", \"tags\"=>\"1, 2, 3, 4, 5, 6, 8, 9, 10, 12, 15, 18, 20, 24, 30, 36, 40, 45, 60, 72, 90, 120, 180, 360, 2015, black, colour theory, conic, divide, divisor, grid, Lazur, lowest common multiple, mathematics, measure, overlapping beauties, polar coordinate, rectangle, remix+230737, submultiple, test images, URH, white\", \"downloaded_by\"=>114, \"detail_link\"=>\"https://openclipart.org/detail/230740/360%20conic%20grid%202\", \"id\"=>230740, \"created\"=>\"2015-10-22 23:08:44\", \"svg\"=>{\"url\"=>\"https://openclipart.org/download/230740/360con16.svg\", \"png_thumb\"=>\"https://openclipart.org/image/250px/svg_to_png/230740/360con16.png\", \"png_full_lossy\"=>\"https://openclipart.org/image/800px/svg_to_png/230740/360con16.png\", \"png_2400px\"=>\"https://openclipart.org/image/2400px/svg_to_png/230740/360con16.png\"}, \"dimensions\"=>{\"png_thumb\"=>{\"width\"=>250, \"height\"=>250}, \"png_full_lossy\"=>{\"width\"=>800, \"height\"=>800}}}", "picture_15"=>"{\"title\"=>\"360 conic grid 3\", \"uploader\"=>\"Lazur URH\", \"comments\"=>\"\", \"total_favorites\"=>0, \"description\"=>\"A polar grid based on 360 and its submultiples, with overlapping filled areas. \", \"tags\"=>\"1, 2, 3, 4, 5, 6, 8, 9, 10, 12, 15, 18, 20, 24, 30, 36, 40, 45, 60, 72, 90, 120, 180, 360, 2015, black, colour theory, conic, divide, divisor, grid, Lazur, lowest common multiple, mathematics, measure, overlapping beauties, polar coordinate, rectangle, remix+230737, submultiple, test images, URH, white\", \"downloaded_by\"=>85, \"detail_link\"=>\"https://openclipart.org/detail/230739/360%20conic%20grid%203\", \"id\"=>230739, \"created\"=>\"2015-10-22 23:07:31\", \"svg\"=>{\"url\"=>\"https://openclipart.org/download/230739/360con15.svg\", \"png_thumb\"=>\"https://openclipart.org/image/250px/svg_to_png/230739/360con15.png\", \"png_full_lossy\"=>\"https://openclipart.org/image/800px/svg_to_png/230739/360con15.png\", \"png_2400px\"=>\"https://openclipart.org/image/2400px/svg_to_png/230739/360con15.png\"}, \"dimensions\"=>{\"png_thumb\"=>{\"width\"=>250, \"height\"=>250}, \"png_full_lossy\"=>{\"width\"=>800, \"height\"=>800}}}", "picture_16"=>"{\"title\"=>\"360 grid 6\", \"uploader\"=>\"Lazur URH\", \"comments\"=>\"\", \"total_favorites\"=>0, \"description\"=>\"A grid based on 360 and its submultiples, with a different alignment. With overlapping.\", \"tags\"=>\"1, 2, 3, 4, 5, 6, 8, 9, 10, 12, 15, 18, 20, 24, 30, 36, 40, 45, 60, 72, 90, 120, 180, 360, 2015, black, colour theory, divide, divisor, grid, Lazur, lowest common multiple, mathematics, measure, overlapping beauties, rectangle, remix+230730, submultiple, test images, URH, white\", \"downloaded_by\"=>80, \"detail_link\"=>\"https://openclipart.org/detail/230735/360%20grid%206\", \"id\"=>230735, \"created\"=>\"2015-10-22 22:54:42\", \"svg\"=>{\"url\"=>\"https://openclipart.org/download/230735/360sj6.svg\", \"png_thumb\"=>\"https://openclipart.org/image/250px/svg_to_png/230735/360sj6.png\", \"png_full_lossy\"=>\"https://openclipart.org/image/800px/svg_to_png/230735/360sj6.png\", \"png_2400px\"=>\"https://openclipart.org/image/2400px/svg_to_png/230735/360sj6.png\"}, \"dimensions\"=>{\"png_thumb\"=>{\"width\"=>250, \"height\"=>167}, \"png_full_lossy\"=>{\"width\"=>800, \"height\"=>533}}}", "picture_17"=>"{\"title\"=>\"360 grid 5\", \"uploader\"=>\"Lazur URH\", \"comments\"=>\"\", \"total_favorites\"=>0, \"description\"=>\"A grid based on 360 and its submultiples, with a different alignment. \", \"tags\"=>\"1, 2, 3, 4, 5, 6, 8, 9, 10, 12, 15, 18, 20, 24, 30, 36, 40, 45, 60, 72, 90, 120, 180, 360, 2015, black, colour theory, divide, divisor, grid, Lazur, lowest common multiple, mathematics, measure, rectangle, remix+230730, submultiple, test images, URH, white\", \"downloaded_by\"=>72, \"detail_link\"=>\"https://openclipart.org/detail/230734/360%20grid%205\", \"id\"=>230734, \"created\"=>\"2015-10-22 22:53:45\", \"svg\"=>{\"url\"=>\"https://openclipart.org/download/230734/360sj5.svg\", \"png_thumb\"=>\"https://openclipart.org/image/250px/svg_to_png/230734/360sj5.png\", \"png_full_lossy\"=>\"https://openclipart.org/image/800px/svg_to_png/230734/360sj5.png\", \"png_2400px\"=>\"https://openclipart.org/image/2400px/svg_to_png/230734/360sj5.png\"}, \"dimensions\"=>{\"png_thumb\"=>{\"width\"=>250, \"height\"=>167}, \"png_full_lossy\"=>{\"width\"=>800, \"height\"=>533}}}", "picture_18"=>"{\"title\"=>\"360 grid 2\", \"uploader\"=>\"Lazur URH\", \"comments\"=>\"\", \"total_favorites\"=>1, \"description\"=>\"A grid based on 360 and its submultiples. With overlapping. \", \"tags\"=>\"1, 2, 3, 4, 5, 6, 8, 9, 10, 12, 15, 18, 20, 24, 30, 36, 40, 45, 60, 72, 90, 120, 180, 360, 2015, black, colour theory, divide, divisor, grid, Lazur, lowest common multiple, mathematics, measure, overlapping beauties, rectangle, remix+230730, submultiple, test images, URH, white\", \"downloaded_by\"=>90, \"detail_link\"=>\"https://openclipart.org/detail/230731/360%20grid%202\", \"id\"=>230731, \"created\"=>\"2015-10-22 22:48:59\", \"svg\"=>{\"url\"=>\"https://openclipart.org/download/230731/360sj2.svg\", \"png_thumb\"=>\"https://openclipart.org/image/250px/svg_to_png/230731/360sj2.png\", \"png_full_lossy\"=>\"https://openclipart.org/image/800px/svg_to_png/230731/360sj2.png\", \"png_2400px\"=>\"https://openclipart.org/image/2400px/svg_to_png/230731/360sj2.png\"}, \"dimensions\"=>{\"png_thumb\"=>{\"width\"=>250, \"height\"=>167}, \"png_full_lossy\"=>{\"width\"=>800, \"height\"=>533}}}", "picture_19"=>"{\"title\"=>\"360 grid 1\", \"uploader\"=>\"Lazur URH\", \"comments\"=>\"\", \"total_favorites\"=>1, \"description\"=>\"A grid based on 360 and its submultiples. \", \"tags\"=>\"1, 2, 3, 4, 5, 6, 8, 9, 10, 12, 15, 18, 20, 24, 30, 36, 40, 45, 60, 72, 90, 120, 180, 360, 2015, black, colour theory, divide, divisor, grid, Lazur, lowest common multiple, mathematics, measure, rectangle, submultiple, test images, URH, white\", \"downloaded_by\"=>66, \"detail_link\"=>\"https://openclipart.org/detail/230730/360%20grid%201\", \"id\"=>230730, \"created\"=>\"2015-10-22 22:44:26\", \"svg\"=>{\"url\"=>\"https://openclipart.org/download/230730/360sj1.svg\", \"png_thumb\"=>\"https://openclipart.org/image/250px/svg_to_png/230730/360sj1.png\", \"png_full_lossy\"=>\"https://openclipart.org/image/800px/svg_to_png/230730/360sj1.png\", \"png_2400px\"=>\"https://openclipart.org/image/2400px/svg_to_png/230730/360sj1.png\"}, \"dimensions\"=>{\"png_thumb\"=>{\"width\"=>250, \"height\"=>167}, \"png_full_lossy\"=>{\"width\"=>800, \"height\"=>533}}}", "mw_dictionaries_count"=>"3", "hw_0"=>"test", "hw_0_check"=>"1", "hw_1"=>"test", "hw_1_check"=>"1", "hw_2"=>"test tube", "elem_def_count"=>"3", "elem_def_0"=>"{'word' => 'test', 'grammar' => 'noun', 'text' => ':a set of questions or problems that are designed to measure a persons knowledge, skills, or abilities She is studying for her math/spelling/history test. I passed/failed/flunked my biology test. The teacher sat at his desk grading tests. a drivers/driving test [=a test that is used to see if someone is able to safely drive a car] an IQ test test questions The test will be on [=the questions on the test will be about] the first three chapters of the book. We took/had a test on European capitals. = (Brit) We did a test on European capitals. The college relies on test scores in its admissions process. see also intelligence test rorschach test screen test'}", "elem_def_0_check"=>"1", "elem_def_1"=>"{'word' => 'test', 'grammar' => 'verbadjective', 'text' => ':to use a set of questions or problems to measure someones skills, knowledge, or abilities Weekly quizzes will test your understanding of the material. The students will all be tested again at the end of the school year. often + on The exam will test you on your understanding of basic grammar rules.'}", "elem_def_1_check"=>"1", "commit"=>"Export as PDF"}
          respond_to do |format|
            format.html { render layout: "pdf_theme.html.erb"}
            format.pdf do
              @pdf = render_to_string :pdf => "name.pdf",
                 :template => "search/convert_pdf_wicked.html.erb",
                 :layout => "pdf_theme.html.erb",
                 :page_size => "A4",
                 :orientation => "Landscape"
              send_data(@pdf, :type=>"application/pdf")
            end
          end
        end

        def convert_pdf
                definitions_count = params["definitions_count"]
                pronounciations_count = params["pronounciations_count"]
                related_words_count = params["related_words_count"]
                top_example = params["top_example"]
                examples_count = params["examples_count"]
                mw_dictionaries_count = params["mw_dictionaries_count"]
                pictures_count = params["pictures_count"]
                puts definitions_count
                respond_to do |format|
                        format.pdf do
                                pdf = Prawn::Document.new(:page_layout => :landscape)
                                        pdf.move_down(30)
                                        pdf.text params['word'].titleize, :size => 30
                                        pdf.move_down(30)
                                #Definition
                                        a = 0
                                        (0..definitions_count.to_i).each do |count|
                                            if params["part_of_speech_#{count}_check"] == "1"
                                              if a == 0
                                                pdf.text "STEP 1 :", :size => 20
                                                pdf.text "Say #{params['word']} 3 times", :size => 20
                                                pdf.stroke_horizontal_rule
                                                pdf.move_down(20)
                                              end
                                                definition = eval(params["part_of_speech_#{count}"])
                                                pdf.text "#{definition['partOfSpeech']} - #{definition['text']}" 
                                              a=a+1
                                            end
                                        end
                                 #Pronounciation
                                        b = 0
                                        (0..pronounciations_count.to_i).each do |count|
                                          if params["raw_type_#{count}_check"] == "1"
                                            if b == 0
                                              pdf.move_down(40)
                                              pdf.text "Pronounciation", :size => 20
                                              pdf.stroke_horizontal_rule
                                            end
                                            pdf.move_down(20)
                                            pronounciations = eval(params["raw_type_#{count}"])
                                            pdf.text "#{pronounciations['rawType']}" #- #{pronounciations['raw']}" 
                                            b = b+1
                                          end
                                        end
                                        #Related Words
                                        e = 0
                                        (0..related_words_count.to_i).each do |count|                                        
                                          if params["relationship_type_#{count}_check"] == "1"
                                            if e == 0
                                              pdf.move_down(40)
                                              pdf.text "Related Words", :size => 20
                                              pdf.stroke_horizontal_rule
                                            end
                                            pdf.move_down(20)
                                            related_words = eval(params["relationship_type_#{count}"])
                                            pdf.text "#{related_words['relationshipType']} = #{related_words['words'].join(",")}"
                                            e = e+1
                                          end
                                        end
                                        if params['top_example_check'] == "1"
                                        pdf.move_down(40)
                                        pdf.text "Top Examples", :size => 20
                                        pdf.stroke_horizontal_rule
                                                pdf.move_down(20)
                                                pdf.text top_example
                                        end

                                       puts "examples_check"
                                        c = 0
                                        pdf.move_down(40)
                                        (0..examples_count.to_i).each do |count|
                                          if params["example_#{count}_check"] == "1"
                                            if c == 0
                                              pdf.text "Examples", :size => 20
                                              pdf.stroke_horizontal_rule
                                              pdf.move_down(20)
                                            end
                                            examples = eval(params["example_#{count}"])
                                            pdf.text examples['text']
                                            pdf.move_down(10)
                                            c = c+1
                                          end
                                        end

                                        g = 0
                                        pdf.move_down(40)
                                        (0..mw_dictionaries_count.to_i).each do |count|
                                          if params["hw_#{count}_check"] == "1"
                                            if g == 0
                                              pdf.text "My Dictionary API", :size => 20
                                              pdf.stroke_horizontal_rule
                                            end
                                            pdf.move_down(20)
                                            pdf.text  params["hw_#{count}"].to_s
                                          end
                                          g = g+1
                                        end

                                        d = 0
                                        pdf.move_down(40)
                                        if pdf.cursor < 100
                                          pdf.start_new_page
                                        end
                                        x,y = 0, pdf.cursor-50

                                        (0..pictures_count.to_i).each do |count|
                                          if params["picture_#{count}_check"] == "1"
                                            if d == 0
                                              pdf.text "Pictures", :size => 20
                                              pdf.stroke_horizontal_rule 
                                            end
                                            pdf.move_down(20)
                                            pictures = eval(params["picture_#{count}"])
                                            begin
                                              size=100
                                              if x < 650
                                                pdf.bounding_box([x,y], :width => size, :height => size) do
                                                  system("convert #{pictures['svg']['png_thumb']} -background white -flatten -define png:color-type=2 -define png:bit-depth=8 image.png") 
                                                  pdf.image 'image.png',:fit => [size, size]
                                                  #pdf.text pictures['svg']['png_thumb']
                                                  x = x+120
                                                end
                                              else
                                                if pdf.cursor < 50
                                                  pdf.start_new_page
                                                end
                                                x = 0
                                                y = pdf.cursor 
                                                pdf.bounding_box([x,y], :width => size, :height => size) do
                                                  pdf.image open(pictures['svg']['png_thumb']),:fit => [size, size]
                                                  x = x+120                                                
                                                end
                                              end
                                            rescue
                                              next
                                            end
                                            d = d+1
                                          end
                                        end
                                send_data(pdf.render, filename: "#{Time.now.strftime("%m-%d-%Y")}-#{params['word']}.pdf",
                                  type: "application/pdf")

                        end


                end
        end
end
